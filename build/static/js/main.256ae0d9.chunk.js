(this["webpackJsonptikenya-hackathon"]=this["webpackJsonptikenya-hackathon"]||[]).push([[0],{163:function(e,t,n){},194:function(e,t,n){},195:function(e,t,n){},197:function(e,t,n){},198:function(e,t,n){},329:function(e,t,n){},331:function(e,t,n){},332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(51),s=n.n(c),r=(n(194),n(115)),o=(n(127),n(195),n(2)),l=function(e){var t=e.loading,n=e.totalAid,a=e.totalCases,i=e.totalDeaths,c=e.totalRecovered;return Object(o.jsxs)("div",{className:"header pt-2",children:[Object(o.jsx)("div",{className:"columns",children:Object(o.jsx)("div",{className:"column is-12 has-text-centered is-flex is-align-items-center",children:Object(o.jsx)("h1",{className:"header__title is-uppercase",children:"Covid-19 Aid Tracker"})})}),!t&&Object(o.jsxs)("div",{className:"columns is-flex is-align-items-center",children:[Object(o.jsx)("div",{className:"column is-5",children:Object(o.jsxs)("div",{className:"is-flex is-align-items-center is-justify-content-center ml-6",children:[Object(o.jsx)("h3",{className:"header__total-aid is-uppercase mr-4",children:"Total Aid"}),Object(o.jsxs)("h4",{className:"header__total-aid-value",children:[n," "]})]})}),Object(o.jsx)("div",{className:"header__vertical-line"}),Object(o.jsx)("div",{className:"column is-7",children:Object(o.jsxs)("div",{className:"columns",children:[Object(o.jsxs)("div",{className:"column is-flex is-align-items-center",children:[Object(o.jsx)("h6",{className:"header__cases is-uppercase",children:"Confirmed Cases"}),Object(o.jsx)("h5",{className:"header__cases-value",children:a})]}),Object(o.jsxs)("div",{className:"column is-flex is-align-items-center",children:[Object(o.jsx)("h6",{className:"header__cases is-uppercase",children:"Confirmed Deaths"}),Object(o.jsx)("h5",{className:"header__cases-value",children:i})]}),Object(o.jsxs)("div",{className:"column is-flex is-align-items-center",children:[Object(o.jsx)("h6",{className:"header__cases is-uppercase",children:"Confirmed Recoveries"}),Object(o.jsx)("h5",{className:"header__cases-value header__cases-value--success ",children:c})]})]})})]})]})},d=n(17),u=n(120),j=n(335),m=n(176),h=n(177),b=n(98),f=n(184),v=n(92),x=n(30),p=n(31),O=n(32),g=n(33),y=(n(197),function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.menuItems,n=e.activeMenuItem,a=e.changeActiveMenuItem;return Object(o.jsx)("div",{className:"sidemenu",children:Object(o.jsx)("aside",{className:"menu",children:Object(o.jsx)("ul",{className:"menu-list",children:t.map((function(e){return Object(o.jsx)("li",{onClick:function(){return a(e.id)},children:Object(o.jsx)("a",{className:e.id===n?"is-active":"",children:e.name})},e.id)}))})})})}}]),n}(a.Component));y.defaultProps={menuItems:[],activeIndex:null};var N=n(75),_=n.n(N);_.a.register("locale","us",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"K",million:"Mn",billion:"Bn",trillion:"Tn"},ordinal:function(e){return 1===e?"er":"\xe8me"},currency:{symbol:"$"}});var C=["ngo","private","international_organization"],k={ngo:["E.U",,"Kalonzo Musyoka Foundation",""],private:["Zhejiang Business Association","Communications Authority of Kenya","Coca Cola Foundation","Broadway Group of Companies"],ing:["GoK","US Embassy","Embassy of Germany","U.S. Government","Slovakian Republic","Japan Government"]},I=function(e){return e.filter((function(e){return""!==e.amount_pledged}))},w=function(e){return _.a.locale("us"),_()(e).format("0,0.00 a")},M=function(e,t){return e.filter((function(e){return e.expending_body===t}))},D=function(e){var t=[],n=[],a={},i=[];e.forEach((function(e){var c=e.type,s=e.source_of_fund,r=Number(e.amount_expended);-1===n.indexOf(e.expending_body)&&n.push(e.expending_body),-1===t.indexOf(c)&&t.push(c),-1===i.indexOf(s)&&i.push(s),!a[c]&&r&&(a[c]=e.amount_expended),a[c]&&r&&(a[c]=+a[c]+ +e.amount_expended)}));var c=Object.keys(a).map((function(e){return{name:e,value:a[e]}}));return{categories:t,totals:c,expendingBodies:n,funds:i[0]}},A=(n(198),{fill:"#073b4c",width:1,opacity:.5}),L={fill:"#073b4c",fontSize:13,fontWeight:500,fontFamily:"Roboto"},F=function(e){var t=e.x,n=e.y,a=e.payload;return Object(o.jsx)("g",{transform:"translate(".concat(t,",").concat(n,")"),children:Object(o.jsx)("text",{x:0,y:-10,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)",style:L,children:a.value})})},T=function(e){var t=e.map((function(e){return e.amount})),n=Math.max.apply(Math,Object(u.a)(t)),a=Math.min.apply(Math,Object(u.a)(t));return Object(o.jsxs)(j.a,{width:1e3,height:450,data:e,margin:{top:5,right:30,left:20,bottom:100},barSize:30,children:[Object(o.jsx)(m.a,{dataKey:"name",tickLine:!1,axisLine:A,tick:Object(o.jsx)(F,{}),padding:{left:0},interval:0}),Object(o.jsx)(h.a,{type:"number",tickFormatter:function(e){return w(e)},padding:{top:50},axisLine:A,tick:L,domain:[a-1e3,n]}),Object(o.jsx)(b.a,{formatter:function(e,t,n){return w(e)},cursor:{fill:"transparent"}}),Object(o.jsx)(f.a,{dataKey:"amount",fill:"#118ab2",children:Object(o.jsx)(v.a,{dataKey:"formattedAmount",position:"top",fill:"#118ab2"})})]})},G=function(e){var t=e.covidAid,n=e.loading,a=i.a.useState(0),c=Object(d.a)(a,2),s=c[0],r=c[1],l=[{id:0,name:"Non Govt Organizations (NGOs)"},{id:1,name:"Private Sector"},{id:2,name:"Governments"}],u=i.a.useMemo((function(){return t.map((function(e,t){var n,a=(null!==(n=e.donor)&&void 0!==n?n:"").toLowerCase();return k.ngo.map((function(e){return e.toLowerCase()})).includes(a)&&(e.donor_type=C[0]),k.private.map((function(e){return e.toLowerCase()})).includes(a)&&(e.donor_type=C[1]),k.ing.map((function(e){return e.toLowerCase()})).includes(a)&&(e.donor_type=C[2]),e}))}),[t]),j=i.a.useMemo((function(){return e=s,I(u).filter((function(t){return t.donor_type===C[e]})).filter((function(e){return Number(e.amount_pledged)})).map((function(e){return{name:e.donor,amount:e.amount_pledged,formattedAmount:w(e.amount_pledged)}}));var e}),[s,u]),m=i.a.useMemo((function(){return l[s].name}),[s]);return n?Object(o.jsx)("button",{className:"button is-loading",children:"Loading"}):Object(o.jsxs)("div",{className:"columns",children:[Object(o.jsx)("div",{className:"column is-one-quarter",children:Object(o.jsx)(y,{menuItems:l,activeMenuItem:s,changeActiveMenuItem:function(e){r(e)}})}),Object(o.jsxs)("div",{className:"column is-three-quarters mt-6",children:[Object(o.jsx)("p",{className:"visualization__title ml-6 pb-4",children:m}),Object(o.jsx)("div",{className:"visualization__chart-area",children:T(j)})]})]})},S=function(e){var t=e.tab.name,n=e.activeTab,a=e.changeActiveTab;return Object(o.jsx)("li",{className:t.toLowerCase()===n?"is-active":"",onClick:function(){return a(t)},children:Object(o.jsx)("a",{children:t})})},z=(n(329),function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.activeTab,n=e.changeActiveTab;return Object(o.jsx)("div",{className:"category-tab",children:Object(o.jsx)("div",{className:"tabs is-centered",children:Object(o.jsx)("ul",{children:this.props.tabList.map((function(e){return Object(o.jsx)(S,{tab:e,activeTab:t,changeActiveTab:n},e.name)}))})})})}}]),n}(a.Component)),B=n(340),R=n(341),K=n(179),E=n(93),P={fill:"#073b4c",fontSize:18,fontWeight:500,fontFamily:"Roboto"},W=["#18D8A6","#1185B2","#FACE61","#093B4C"],q=function(e){var t=e.pieChartData,n=e.menuItemName,a=e.showTotal,i=function(e){return e.map((function(e){return e.value})).reduce((function(e,t){return e+t}),0)}(t);return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"is-flex is-flex is-justify-content-space-between",children:[a&&Object(o.jsxs)("div",{children:[Object(o.jsxs)("p",{className:"visualization__title",children:["Expending Body: ",n]}),Object(o.jsx)("p",{className:"visualization__sub-title",children:"Source of funds: National Government"})]}),!a&&Object(o.jsx)("p",{className:"visualization__title",children:"Expending By Counties"}),a&&Object(o.jsx)("div",{children:Object(o.jsxs)("h4",{className:"visualization__disbursed",children:[w(i)," Disbursed"]})})]}),Object(o.jsx)(B.a,{id:"expenditure-counties",width:"100%",height:530,children:Object(o.jsx)(R.a,{children:Object(o.jsx)(K.a,{cy:"50%",data:t,labelLine:!0,label:function(e){return function(e,t){var n=t.cx,a=t.cy,i=t.midAngle,c=t.innerRadius,s=t.outerRadius,r=t.index,l=Math.PI/180,d=25+c+(s-c),u=n+d*Math.cos(-i*l),j=a+d*Math.sin(-i*l);return Object(o.jsxs)("text",{x:u,y:j,fill:"#8884d8",textAnchor:u>n?"start":"end",dominantBaseline:"central",style:P,children:[Object(o.jsx)("tspan",{style:P,children:w(e[r].value)}),Object(o.jsx)("tspan",{x:u,y:j+P.fontSize+5,style:P,children:e[r].name})]})}(t,e)},outerRadius:"80%",fill:"#8884d8",dataKey:"value",children:t.map((function(e,t){return Object(o.jsx)(E.a,{fill:W[t%W.length]},"cell-".concat(t))}))})})})]})},J=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(x.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.pieChartData,n=e.menuItemName;return Object(o.jsx)("div",{className:"pt-6 pl-6 pr-6",children:Object(o.jsx)(q,{pieChartData:t,menuItemName:n,showTotal:!0})})}}]),n}(a.Component),U={fill:"#073b4c",fontSize:16,fontWeight:600,fontFamily:"Roboto"},H=function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){var e;Object(x.a)(this,n);for(var a=arguments.length,i=new Array(a),c=0;c<a;c++)i[c]=arguments[c];return(e=t.call.apply(t,[this].concat(i))).renderCustomizedLabel=function(t){var n=e.props.pieChartData,a=t.cx,i=t.cy,c=t.midAngle,s=t.innerRadius,r=t.outerRadius,l=t.index,d=Math.PI/180,u=25+s+(r-s),j=a+u*Math.cos(-c*d),m=i+u*Math.sin(-c*d);return Object(o.jsxs)("text",{x:j,y:m,fill:"#8884d8",textAnchor:j>a?"start":"end",dominantBaseline:"central",style:U,children:[Object(o.jsx)("tspan",{style:U,children:w(n[l].value)}),Object(o.jsx)("tspan",{x:j,y:m+U.fontSize+5,style:U,children:n[l].name})]})},e.ticks=function(e){return[0,e.allocatied,e.allocated+e.unallocated].map((function(e){return w(e)}))},e}return Object(p.a)(n,[{key:"render",value:function(){var e=this.props,t=e.pieChartData,n=e.menuItemName,a=e.nationalGovtFunding,i=e.countyGovtReceipt,c=[{unallocated:a-i,allocated:i}];return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsxs)("div",{className:"pt-6 pl-6 pr-6 is-flex is-flex is-justify-content-space-between",children:[Object(o.jsx)("div",{children:Object(o.jsxs)("p",{className:"visualization__title",children:["Expending Body: ",n]})}),Object(o.jsx)("div",{children:Object(o.jsxs)("h4",{className:"visualization__disbursed",children:[w(c[0].allocated)," Disbursed"]})})]}),Object(o.jsxs)("div",{style:{paddingLeft:38,paddingTop:20},children:[Object(o.jsxs)("p",{className:"",style:{paddingLeft:10,color:"#0a3b4c",fontWeight:500,fontSize:13},children:[w(c[0].allocated)," out of"," ",w(c[0].allocated+c[0].unallocated)," Disbursed to County Governments"]}),Object(o.jsx)(B.a,{width:"100%",height:120,children:Object(o.jsxs)(j.a,{layout:"vertical",data:c,margin:{top:5,right:10,left:10,bottom:0},children:[Object(o.jsx)(m.a,{style:{transform:"translate(0, -40%)"},orientation:"bottom",type:"number",axisLine:!1,tick:U,ticks:[0,c[0].allocated,c[0].allocated+c[0].unallocated],domain:[0,w(c[0].allocated+c[0].unallocated)],tickFormatter:function(e){return e>0?w(e):0}}),Object(o.jsx)(h.a,{type:"category",hide:!0}),Object(o.jsx)(f.a,{dataKey:"allocated",stackId:"a",fill:"#34EDD2"}),Object(o.jsx)(f.a,{dataKey:"unallocated",stackId:"a",fill:"#089B74"})]})}),Object(o.jsx)(q,{pieChartData:t,menuItemName:n,showTotal:!1})]})]})}}]),n}(a.Component),Z=(n(331),function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(e){var a;return Object(x.a)(this,n),(a=t.call(this,e)).createMenuItems=function(e){return e.map((function(e,t){return{id:t,name:e}}))},a.filterByExpendingBody=function(e){var t=a.state.expenditureData;return M(t,e)},a.changeActiveMenuItem=function(e){a.setState({activeMenuItemId:e})},a.state={loading:!0,menuItems:[],activeMenuItemId:0,expenditureData:[],summary:{},nationalGovtFunding:0,countyGovtReceipt:0},a}return Object(p.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("https://actionfortransparency.org/wp-json/wp/v2/covid19_expenditure").then((function(e){return e.json()})).then((function(t){var n=D(t);e.setState({loading:!1,expenditureData:t,summary:n,menuItems:e.createMenuItems(n.expendingBodies)})})),fetch("https://actionfortransparency.org/wp-json/wp/v2/covid19_aid").then((function(e){return e.json()})).then((function(t){var n=I(t).filter((function(e){return"National Government"===e.recipient[0]})).map((function(e){return e.amount_pledged})).reduce((function(e,t){return+e+ +t}),0),a=.3*n;e.setState({nationalGovtFunding:n,countyGovtReceipt:a})}))}},{key:"renderActiveContent",value:function(e,t){var n=this.state,a=n.expenditureData,i=n.countyGovtReceipt,c=n.nationalGovtFunding,s=M(a,t),r=D(s);return"County Governments"===t?Object(o.jsx)(H,{menuItemName:t,pieChartData:r.totals,nationalGovtFunding:c,countyGovtReceipt:i}):Object(o.jsx)(J,{menuItemName:t,pieChartData:r.totals})}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.menuItems,a=e.activeMenuItemId;if(t)return Object(o.jsx)("button",{className:"button is-loading",children:"Loading"});var i=n[a].name;return Object(o.jsxs)("div",{className:"columns",children:[Object(o.jsx)("div",{className:"column is-one-quarter",children:Object(o.jsx)(y,{menuItems:n,activeMenuItem:a,changeActiveMenuItem:this.changeActiveMenuItem})}),Object(o.jsx)("div",{className:"column is-three-quarters",children:Object(o.jsx)("div",{className:"visualization__chart-area",children:this.renderActiveContent(a,i)})})]})}}]),n}(a.Component)),$=(n(163),function(e){var t=e.title,n=(e.description,e.donationCount),a=e.donor,i=e.donationDate,c=e.articleLink,s=e.donationType,r="";switch(s){case"Face Masks":r="./masks.svg";break;case"Mobile Testing Lab":r="./testing_kits.svg"}return Object(o.jsxs)("div",{className:"card in-kind-card",onClick:function(){return window.open(c)},children:[Object(o.jsx)("div",{className:"card-image",children:Object(o.jsx)("figure",{className:"image is-4by3 m-2",children:Object(o.jsx)("img",{src:r,alt:"Donation image"})})}),Object(o.jsxs)("div",{className:"card-content",children:[Object(o.jsx)("div",{className:"media",children:Object(o.jsxs)("div",{className:"media-content",children:[Object(o.jsxs)("p",{className:"title is-5",children:[n," ",s," donated by ",a]}),Object(o.jsx)("p",{className:"subtitle is-6 mt-2",children:t})]})}),Object(o.jsxs)("div",{className:"content",children:[Object(o.jsx)("br",{}),Object(o.jsx)("time",{dateTime:i,children:new Date(i).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"2-digit"})})]})]})]})}),Q=function(e){var t=e.donations,n=function(e){return"FaceMasks"==e?"Face Masks":"Mobile Testing Lab"};return Object(o.jsx)("div",{className:"columns is-centered",children:t.map((function(e){var t=e.donor,a=e.title,i=e.content,c=e.link,s=e.date_pledged,r=e.donated_items.split(":"),l=Object(d.a)(r,2),u=l[0],j=l[1];return Object(o.jsx)("div",{className:"column is-2 mt-3",children:Object(o.jsx)($,{title:a.rendered,donor:t,description:i.rendered,articleLink:c,donationDate:s,donationCount:j,donationType:n(u)})})}))})},V=(n(332),function(e){var t=e.loading,n=e.cashDonations,a=e.inKindDonations,c=i.a.useState("aid"),s=Object(d.a)(c,2),r=s[0],l=s[1];return Object(o.jsxs)("div",{className:"mt-4",children:[Object(o.jsx)(z,{tabList:[{name:"Aid"},{name:"Expenditure"},{name:"In Kind"}],activeTab:r,changeActiveTab:function(e){l(e.toLocaleLowerCase())}}),Object(o.jsx)("div",{className:"tabs-content visualization__tab-content mt-3",children:function(e){switch(e.toLocaleLowerCase()){case"aid":return Object(o.jsx)(G,{loading:t,covidAid:n});case"in kind":return Object(o.jsx)(Q,{donations:a});case"expenditure":return Object(o.jsx)(Z,{});default:return Object(o.jsx)(G,{loading:t,covidAid:n})}}(r)})]})}),X=n(121),Y=function(e){return Object(o.jsxs)("svg",Object(X.a)(Object(X.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",xmlSpace:"preserve"},e),{},{children:[Object(o.jsx)("circle",{fill:"none",stroke:"#e74c3c",strokeWidth:4,cx:50,cy:50,r:44,style:{opacity:.5}}),Object(o.jsx)("circle",{fill:"#e74c3c",stroke:"#e74c3c",strokeWidth:3,cx:8,cy:54,r:6,children:Object(o.jsx)("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 48",to:"360 50 52",repeatCount:"indefinite"})})]}))},ee=(n(333),function(){return fetch("https://actionfortransparency.org/wp-json/wp/v2/covid19_aid").then((function(e){return e.json()}))}),te=function(){return fetch("https://disease.sh/v3/covid-19/countries/kenya").then((function(e){return e.json()}))},ne=function(){var e=Object(r.a)("/covid/aid",ee),t=e.data,n=e.error,a=Object(r.a)("/cases/kenya",te),i=a.data,c=a.error;if(c||n)return Object(o.jsx)("div",{children:"Failed to load"});var s=!i&&!c,d=!t&&!n;if(d||s)return Object(o.jsx)("div",{className:"loader-container",children:Object(o.jsx)(Y,{width:100,height:100})});var u,j=i.cases,m=i.deaths,h=i.recovered,b=I(t).map((function(e){return e.amount_pledged})).reduce((function(e,t){return+e+ +t}),0),f=t.filter((function(e){return e.donation_type.includes("IN KIND")})),v=t.filter((function(e){return e.donation_type.includes("CASH")}));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(l,{loading:s,totalAid:(u=b,_()(u).format("0,0")),totalCases:j,totalDeaths:m,totalRecovered:h}),Object(o.jsx)(V,{loading:d,cashDonations:v,inKindDonations:f})]})},ae=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,342)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),c(e),s(e)}))};s.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(ne,{})}),document.getElementById("root")),ae()}},[[334,1,2]]]);
//# sourceMappingURL=main.256ae0d9.chunk.js.map
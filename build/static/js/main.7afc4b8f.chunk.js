(this["webpackJsonptikenya-hackathon"]=this["webpackJsonptikenya-hackathon"]||[]).push([[0],{152:function(e,t,n){},183:function(e,t,n){},184:function(e,t,n){},186:function(e,t,n){},187:function(e,t,n){},322:function(e,t,n){},323:function(e,t,n){},324:function(e,t,n){},325:function(e,t,n){},326:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),c=n(78),s=n.n(c),r=(n(183),n(59)),o=(n(118),n(184),n(2)),d=function(e){var t=e.loading,n=e.totalAid,a=e.totalCases,i=e.totalDeaths,c=e.totalRecovered;return Object(o.jsxs)("div",{className:"header pt-2",children:[Object(o.jsx)("div",{className:"columns",children:Object(o.jsx)("div",{className:"column is-12 has-text-centered is-flex is-align-items-center",children:Object(o.jsx)("h1",{className:"header__title is-uppercase",children:"Covid-19 Aid Tracker"})})}),!t&&Object(o.jsxs)("div",{className:"columns is-flex is-align-items-center",children:[Object(o.jsx)("div",{className:"column is-5",children:Object(o.jsxs)("div",{className:"is-flex is-align-items-center is-justify-content-center ml-6",children:[Object(o.jsx)("h3",{className:"header__total-aid is-uppercase mr-4",children:"Total Aid"}),Object(o.jsxs)("h4",{className:"header__total-aid-value",children:[n," "]})]})}),Object(o.jsx)("div",{className:"header__vertical-line"}),Object(o.jsx)("div",{className:"column is-7",children:Object(o.jsxs)("div",{className:"columns",children:[Object(o.jsxs)("div",{className:"column is-flex is-align-items-center",children:[Object(o.jsx)("h6",{className:"header__cases is-uppercase",children:"Confirmed Cases"}),Object(o.jsx)("h5",{className:"header__cases-value",children:a})]}),Object(o.jsxs)("div",{className:"column is-flex is-align-items-center",children:[Object(o.jsx)("h6",{className:"header__cases is-uppercase",children:"Confirmed Deaths"}),Object(o.jsx)("h5",{className:"header__cases-value",children:i})]}),Object(o.jsxs)("div",{className:"column is-flex is-align-items-center",children:[Object(o.jsx)("h6",{className:"header__cases is-uppercase",children:"Confirmed Recoveries"}),Object(o.jsx)("h5",{className:"header__cases-value header__cases-value--success ",children:c})]})]})})]})]})},l=n(15),u=n(65),j=n(328),m=n(169),b=n(170),h=n(91),f=n(174),p=n(167),v=n(80),x=n(81),O=n(82),g=n(87),N=(n(186),function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props,t=e.menuItems,n=e.activeMenuItem,a=e.changeActiveMenuItem;return Object(o.jsx)("div",{className:"sidemenu",children:Object(o.jsx)("aside",{className:"menu",children:Object(o.jsx)("ul",{className:"menu-list",children:t.map((function(e){return Object(o.jsx)("li",{onClick:function(){return a(e.id)},children:Object(o.jsx)("a",{className:e.id===n?"is-active":"",children:e.name})},e.id)}))})})})}}]),n}(a.Component));N.defaultProps={menuItems:[],activeIndex:null};var y=n(66),_=n.n(y);_.a.register("locale","us",{delimiters:{thousands:",",decimal:"."},abbreviations:{thousand:"K",million:"Mn",billion:"Bn",trillion:"Tn"},ordinal:function(e){return 1===e?"er":"\xe8me"},currency:{symbol:"$"}});var k=["ngo","private","international_organization"],C={ngo:["E.U",,"Kalonzo Musyoka Foundation",""],private:["Zhejiang Business Association","Communications Authority of Kenya","Coca Cola Foundation","Broadway Group of Companies"],ing:["GoK","US Embassy","Embassy of Germany","U.S. Government","Slovakian Republic","Japan Government"]},w=function(e){return e.filter((function(e){return""!==e.amount_pledged}))},L=function(e){return _.a.locale("us"),_()(e).format("0,0.00 a")},A=(n(187),{fill:"#073b4c",width:1,opacity:.5}),M={fill:"#073b4c",fontSize:13,fontWeight:500,fontFamily:"Roboto"},S=function(e){var t=e.x,n=e.y,a=e.payload;return Object(o.jsx)("g",{transform:"translate(".concat(t,",").concat(n,")"),children:Object(o.jsx)("text",{x:0,y:-10,dy:16,textAnchor:"end",fill:"#666",transform:"rotate(-35)",style:M,children:a.value})})},T=function(e){var t=e.map((function(e){return e.amount})),n=Math.max.apply(Math,Object(u.a)(t)),a=Math.min.apply(Math,Object(u.a)(t));return Object(o.jsxs)(j.a,{width:1e3,height:450,data:e,margin:{top:5,right:30,left:20,bottom:100},barSize:30,children:[Object(o.jsx)(m.a,{dataKey:"name",tickLine:!1,axisLine:A,tick:Object(o.jsx)(S,{}),padding:{left:0},interval:0}),Object(o.jsx)(b.a,{type:"number",tickFormatter:function(e){return L(e)},padding:{top:50},axisLine:A,tick:M,domain:[a-1e3,n]}),Object(o.jsx)(h.a,{formatter:function(e,t,n){return L(e)},cursor:{fill:"transparent"}}),Object(o.jsx)(f.a,{dataKey:"amount",fill:"#118ab2",children:Object(o.jsx)(p.a,{dataKey:"formattedAmount",position:"top",fill:"#118ab2"})})]})},I=function(e){var t=e.covidAid,n=e.loading,a=i.a.useState(0),c=Object(l.a)(a,2),s=c[0],r=c[1],d=[{id:0,name:"Non Govt Organizations (NGOs)"},{id:1,name:"Private Sector"},{id:2,name:"Governments"}],u=i.a.useMemo((function(){return t.map((function(e,t){var n,a=(null!==(n=e.donor)&&void 0!==n?n:"").toLowerCase();return C.ngo.map((function(e){return e.toLowerCase()})).includes(a)&&(e.donor_type=k[0]),C.private.map((function(e){return e.toLowerCase()})).includes(a)&&(e.donor_type=k[1]),C.ing.map((function(e){return e.toLowerCase()})).includes(a)&&(e.donor_type=k[2]),e}))}),[t]),j=i.a.useMemo((function(){return e=s,w(u).filter((function(t){return t.donor_type===k[e]})).filter((function(e){return Number(e.amount_pledged)})).map((function(e){return{name:e.donor,amount:e.amount_pledged,formattedAmount:L(e.amount_pledged)}}));var e}),[s,u]),m=i.a.useMemo((function(){return d[s].name}),[s]);return n?Object(o.jsx)("button",{className:"button is-loading",children:"Loading"}):Object(o.jsxs)("div",{className:"columns",children:[Object(o.jsx)("div",{className:"column is-one-quarter",children:Object(o.jsx)(N,{menuItems:d,activeMenuItem:s,changeActiveMenuItem:function(e){r(e)}})}),Object(o.jsxs)("div",{className:"column is-three-quarters mt-6",children:[Object(o.jsx)("p",{className:"visualization__title ml-6 pb-4",children:m}),Object(o.jsx)("div",{className:"visualization__chart-area",children:T(j)})]})]})},D=function(e){var t=e.tab.name,n=e.activeTab,a=e.changeActiveTab;return Object(o.jsx)("li",{className:t.toLowerCase()===n?"is-active":"",onClick:function(){return a(t)},children:Object(o.jsx)("a",{children:t})})},F=(n(322),function(e){Object(O.a)(n,e);var t=Object(g.a)(n);function n(){return Object(v.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){var e=this.props,t=e.activeTab,n=e.changeActiveTab;return Object(o.jsx)("div",{className:"category-tab",children:Object(o.jsx)("div",{className:"tabs is-centered",children:Object(o.jsx)("ul",{children:this.props.tabList.map((function(e){return Object(o.jsx)(D,{tab:e,activeTab:t,changeActiveTab:n},e.name)}))})})})}}]),n}(a.Component)),z=(n(323),n(113)),K=function(e){return Object(o.jsxs)("svg",Object(z.a)(Object(z.a)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",xmlSpace:"preserve"},e),{},{children:[Object(o.jsx)("circle",{fill:"none",stroke:"#e74c3c",strokeWidth:4,cx:50,cy:50,r:44,style:{opacity:.5}}),Object(o.jsx)("circle",{fill:"#e74c3c",stroke:"#e74c3c",strokeWidth:3,cx:8,cy:54,r:6,children:Object(o.jsx)("animateTransform",{attributeName:"transform",dur:"2s",type:"rotate",from:"0 50 48",to:"360 50 52",repeatCount:"indefinite"})})]}))},B=n(171),E=n.n(B),G=n(172),R=n.n(G),P=function(e){var t=e.pieChartData,n=e.menuItemName,a=e.showTotal,c=function(e){return e.map((function(e){return e.y})).reduce((function(e,t){return e+t}),0)}(t),s=i.a.useRef(null),r={chart:{plotBorderWidth:0,type:"pie",backgroundColor:"transparent"},title:{text:""},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},accessibility:{point:{valueSuffix:"%"}},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",borderColor:"transparent",borderWidth:0,dataLabels:{enabled:!0,format:"<b>{point.name}</b>: {point.percentage:.1f} %"}}},series:[{type:"pie"},{data:Object(u.a)(t),type:"pie"}]};return Object(o.jsxs)("div",{children:[Object(o.jsxs)("div",{className:"is-flex is-flex is-justify-content-space-between",children:[a&&Object(o.jsx)("div",{children:Object(o.jsxs)("p",{className:"visualization__title",children:["Source of Funds: ",n]})}),!a&&Object(o.jsx)("p",{className:"visualization__title",children:"Expending By Counties"}),a&&Object(o.jsx)("div",{children:Object(o.jsxs)("h4",{className:"visualization__disbursed",children:[L(c)," Disbursed"]})})]}),Object(o.jsx)("figure",{className:"highcharts-figure",children:Object(o.jsx)(R.a,{highcharts:E.a,options:r,ref:s})})]})},W=function(){return fetch("https://actionfortransparency.org/wp-json/wp/v2/covid19_expenditure").then((function(e){return e.json()}))},q=function(e){var t=i.a.useState(!1),n=Object(l.a)(t,2),a=n[0],c=(n[1],i.a.useState(0)),s=Object(l.a)(c,2),d=s[0],u=s[1],j=i.a.useState([]),m=Object(l.a)(j,2),b=m[0],h=m[1],f=Object(r.a)("/covid/expenditure",W),p=f.data,v=f.error;if(i.a.useEffect((function(){if(void 0!==p){var e=p.filter((function(e){return e.source_of_fund===y})).map((function(e,t){return{name:e.expending_body,y:parseInt(e.amount_expended),selected:0===t,sliced:0===t}}));h(e)}}),[d,p]),!p&&!v)return Object(o.jsx)("div",{className:"loader-container",children:Object(o.jsx)(K,{width:100,height:100})});var x=function(e){var t=[],n=[],a={},i=[];e.forEach((function(e){var c=e.type,s=e.source_of_fund,r=Number(e.amount_expended);-1===n.indexOf(e.expending_body)&&n.push(e.expending_body),-1===t.indexOf(c)&&t.push(c),-1===i.indexOf(s)&&i.push(s),!a[c]&&r&&(a[c]=e.amount_expended),a[c]&&r&&(a[c]=+a[c]+ +e.amount_expended)}));var c=Object.keys(a).map((function(e){return{name:e,value:a[e]}}));return{categories:t,totals:c,expendingBodies:n,fundSources:i}}(p),O=x.fundSources,g=(x.expendingBodies,x.totals,O.map((function(e,t){return{id:t,name:e}})));if(a)return Object(o.jsx)("button",{className:"button is-loading",children:"Loading"});var y=g[d].name;return Object(o.jsxs)("div",{className:"columns",children:[Object(o.jsx)("div",{className:"column is-one-quarter",children:Object(o.jsx)(N,{menuItems:g,activeMenuItem:d,changeActiveMenuItem:function(e){return u(e)}})}),Object(o.jsx)("div",{className:"column is-three-quarters",children:Object(o.jsx)("div",{className:"visualization__chart-area",children:Object(o.jsx)(P,{menuItemName:y,pieChartData:b,showTotal:!0})})})]})},J=(n(152),function(e){var t=e.title,n=(e.description,e.donationCount),a=e.donor,i=e.donationDate,c=e.articleLink,s=e.donationType,r="";switch(s){case"Face Masks":r="./masks.svg";break;case"Mobile Testing Lab":r="./testing_kits.svg"}return Object(o.jsxs)("div",{className:"card in-kind-card",onClick:function(){return window.open(c)},children:[Object(o.jsx)("div",{className:"card-image",children:Object(o.jsx)("figure",{className:"image is-4by3 m-2",children:Object(o.jsx)("img",{src:r,alt:"Donation image"})})}),Object(o.jsxs)("div",{className:"card-content",children:[Object(o.jsx)("div",{className:"media",children:Object(o.jsxs)("div",{className:"media-content",children:[Object(o.jsxs)("p",{className:"title is-5",children:[n," ",s," donated by ",a]}),Object(o.jsx)("p",{className:"subtitle is-6 mt-2",children:t})]})}),Object(o.jsxs)("div",{className:"content",children:[Object(o.jsx)("br",{}),Object(o.jsx)("time",{dateTime:i,children:new Date(i).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"2-digit"})})]})]})]})}),U=function(e){var t=e.donations,n=function(e){return"FaceMasks"==e?"Face Masks":"Mobile Testing Lab"};return Object(o.jsx)("div",{className:"columns is-centered",children:t.map((function(e){var t=e.donor,a=e.title,i=e.content,c=e.link,s=e.date_pledged,r=e.donated_items.split(":"),d=Object(l.a)(r,2),u=d[0],j=d[1];return Object(o.jsx)("div",{className:"column is-2 mt-3",children:Object(o.jsx)(J,{title:a.rendered,donor:t,description:i.rendered,articleLink:c,donationDate:s,donationCount:j,donationType:n(u)})})}))})},H=(n(324),function(e){var t=e.loading,n=e.cashDonations,a=e.inKindDonations,c=i.a.useState("aid"),s=Object(l.a)(c,2),r=s[0],d=s[1];return Object(o.jsxs)("div",{className:"mt-4",children:[Object(o.jsx)(F,{tabList:[{name:"Aid"},{name:"Expenditure"},{name:"In Kind"}],activeTab:r,changeActiveTab:function(e){d(e.toLocaleLowerCase())}}),Object(o.jsx)("div",{className:"tabs-content visualization__tab-content mt-3",children:function(e){switch(e.toLocaleLowerCase()){case"aid":return Object(o.jsx)(I,{loading:t,covidAid:n});case"in kind":return Object(o.jsx)(U,{donations:a});case"expenditure":return Object(o.jsx)(q,{});default:return Object(o.jsx)(I,{loading:t,covidAid:n})}}(r)})]})}),Z=(n(325),function(){return fetch("https://actionfortransparency.org/wp-json/wp/v2/covid19_aid").then((function(e){return e.json()}))}),$=function(){return fetch("https://disease.sh/v3/covid-19/countries/kenya").then((function(e){return e.json()}))},Q=function(){var e=Object(r.a)("/covid/aid",Z),t=e.data,n=e.error,a=Object(r.a)("/cases/kenya",$),i=a.data,c=a.error;if(c||n)return Object(o.jsx)("div",{children:"Failed to load"});var s=!i&&!c,l=!t&&!n;if(l||s)return Object(o.jsx)("div",{className:"loader-container",children:Object(o.jsx)(K,{width:100,height:100})});var u,j=i.cases,m=i.deaths,b=i.recovered,h=w(t).map((function(e){return e.amount_pledged})).reduce((function(e,t){return+e+ +t}),0),f=t.filter((function(e){return e.donation_type.includes("IN KIND")})),p=t.filter((function(e){return e.donation_type.includes("CASH")}));return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)(d,{loading:s,totalAid:(u=h,_()(u).format("0,0")),totalCases:j,totalDeaths:m,totalRecovered:b}),Object(o.jsx)(H,{loading:l,cashDonations:p,inKindDonations:f})]})},V=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,333)).then((function(t){var n=t.getCLS,a=t.getFID,i=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),i(e),c(e),s(e)}))};s.a.render(Object(o.jsx)(i.a.StrictMode,{children:Object(o.jsx)(Q,{})}),document.getElementById("root")),V()}},[[326,1,2]]]);
//# sourceMappingURL=main.7afc4b8f.chunk.js.map